# scrollformpweixin
一个能生成特定代码块的工具，这个代码块粘贴到微信公众号编辑器后，能在微信文章内部实现一个“可展开/折叠的文本区域”，从而解决文字过长占满画面的问题。

# 微信公众号内嵌滚动图文区域生成器 (WeChat Scrollable Content Generator)

一个简单的前端工具，用于生成HTML代码，以在微信公众号文章中嵌入一个固定高度、可垂直滚动的图文区域。此工具旨在解决长文本或多图片内容在微信文章中因占据过多版面而影响阅读体验的问题。用户可以通过输入Markdown文本（支持图片），自定义滚动区域的各项样式，并一键复制代码，然后粘贴到微信公众号编辑器的HTML模式下使用。

![1746776962200.png](https://pig-1301994150.cos.ap-guangzhou.myqcloud.com/maike/1746776962200.png)

## ✨ 功能特性 (Features)

* **Markdown 实时转换**：输入的 Markdown 文本（包括图片、列表、代码块等）会即时转换为 HTML。
* **支持图片内容**：通过 Markdown 语法插入的图片可以在滚动区域内正常显示和滚动。
* **样式自定义**：用户可以方便地调整滚动区域的固定高度、边框样式、圆角大小以及为滚动条预留的右侧内边距。
* **可选渐变遮罩**：可选择在滚动区域底部添加一个半透明的渐变遮罩，以视觉方式提示用户内容可以向下滚动。
* **内联样式优化**：为 Markdown 转换后的主要 HTML 元素（如段落、标题、图片、列表、代码块等）自动添加基础的内联 `style` 属性，以期提高在微信编辑器中的样式兼容性和保留率。
* **一键复制代码**：方便地复制已配置和生成好的完整 HTML 代码块。
* **纯前端实现**：所有功能均通过 HTML, CSS, 和 JavaScript 在用户浏览器端实现，无需任何后端服务，下载后即可离线使用。
* **实时预览**：在工具页面上提供一个预览区域，展示生成代码在标准浏览器中的大致效果（**注意：最终效果以微信编辑器和手机端预览为准**）。

## 🚀 如何使用 (How to Use)

1.  **下载文件**：获取本工具的 `index.html` 文件并保存到您的本地计算机。
2.  **浏览器打开**：使用任一现代网页浏览器（如 Chrome, Firefox, Edge, Safari 等）打开此 `index.html` 文件。
3.  **输入内容**：
    * 在标有“输入 Markdown 文本”的文本区域中，输入或粘贴您的完整内容。支持标准的 Markdown 语法，包括图片插入（格式：`![图片描述](图片URL链接)`）。
4.  **配置选项**：
    * 根据您的排版需求，调整页面上提供的各项配置选项，例如“滚动区域高度”、“圆角大小”、“边框样式”和“内边距-右”。
    * 勾选或取消勾选“包含底部渐变遮罩”选项，以决定是否显示该视觉提示。
5.  **生成代码**：点击“生成微信代码”按钮。
6.  **复制代码**：
    * 页面下方的“生成的代码”区域将显示包含您的内容和配置的完整HTML代码块。
    * 点击“复制代码到剪贴板”按钮复制全部生成的代码。
7.  **粘贴到微信编辑器**：
    * 登录您的微信公众号后台，进入图文素材编辑器。
    * 在编辑器工具栏中找到并点击切换到 **HTML 模式**（通常显示为 `</>` 或类似的图标）。
    * 将您刚刚复制的**全部代码**粘贴到微信编辑器的HTML编辑区域中。
8.  **预览与调整**：
    * 切换回微信编辑器的可视化模式，查看大致效果。
    * **强烈建议**：务必使用微信的“发送到手机预览”功能，在真实的手机环境中检查滚动效果、样式兼容性以及内容显示是否符合预期。根据预览结果，您可能需要返回本工具微调配置或内容。

##🛠️ 技术栈 (Technology Stack)

* **HTML5**
* **CSS3**
* **JavaScript (ES6+)**
* **[marked.js](https://marked.js.org/)**: 一个高效的 Markdown 解析和编译器，用于将用户输入的 Markdown 文本转换为 HTML。
* **[DOMPurify](https://github.com/cure53/DOMPurify)**: 一个强大的XSS过滤器和HTML清理库，用于确保由 Markdown 生成的 HTML 内容的安全性。

## 🤔 工作原理 (How it Works - Core Mechanism)

本工具实现滚动效果的核心机制相对简单，主要依赖以下CSS属性组合：

1.  **外层容器 (`div`)**:
    * 设置一个固定的 `height` (例如 `400px`)。
    * 设置 `overflow: hidden;` 来裁剪任何超出此外层容器固定高度的内容（如果内部没有自己的滚动机制）。
    * 设置 `position: relative;` 作为内部绝对定位元素（如渐变遮罩）的定位基准。
2.  **内层内容容器 (`div`)**:
    * 设置 `height: 100%;` 使其高度填充外层容器。
    * 设置 `overflow-y: scroll;` 来在该 `div` 的内容实际高度超过其自身高度（即外层容器的固定高度）时，启用垂直滚动条。
    * （可选）`-webkit-overflow-scrolling: touch;` 用于优化在iOS设备上的滚动体验。

所有关键的样式（包括用户自定义的尺寸、边框以及为Markdown元素添加的基础样式）都尽可能地通过**内联 `style` 属性**直接附加到HTML元素上。这样做是为了最大限度地提高这些样式在经过微信公众号编辑器复杂的HTML和CSS过滤后仍能被保留和正确解析的概率。

## ⚠️ 重要提示与免责声明 (Important Notes & Disclaimer)

* **微信编辑器兼容性风险**：微信公众号编辑器为了保证平台内容的统一性和安全性，会对用户粘贴的HTML代码和CSS样式进行严格的过滤和修改。其过滤规则复杂且可能随时调整。因此，本工具生成的代码**不能100%保证**在所有情况下或未来的微信版本中都能完美无误地工作。
* **务必进行充分测试**：在将生成的代码用于您计划正式发布的微信公众号文章之前，**请务必、务必、务必**在微信编辑器中进行全面的测试，并通过“发送到手机预览”功能在不同型号的手机（iOS和Android）上仔细检查实际的显示效果和滚动功能。
* **预览与实际效果差异**：本工具页面上提供的“效果预览”功能是基于您当前使用的标准网页浏览器的渲染引擎。微信内置的浏览器（WebView）拥有其自身的渲染特性和CSS支持水平，因此，工具页面的预览效果**仅供参考**，最终的实际显示效果应以微信手机端预览为准。
* **图片链接有效性**：请确保您在Markdown内容中使用的所有图片链接都是公网可以直接访问的、有效的URL。微信编辑器在处理图片时通常会尝试转存外部图片到其自己的服务器。
* **代码更新与维护**：由于微信平台的更新策略非开发者所能控制，本工具的有效性可能会随时间推移而发生变化。

## 📄 开源许可证 (License)

本工具采用 [MIT 许可证](LICENSE.md)授权。

